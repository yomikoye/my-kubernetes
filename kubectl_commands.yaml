#general
kubectl run nginx --image nginx
kubectl get pods
kubectl get nodes
kubectl describe pods nginx
kubectl delete pods nginx
kubectl get pods -o wide
kubectl run nginx --image=nginx --dry-run=client -o yaml > nginx-run.yaml
kubectl edit pod nginx
kubectl apply -f nginx-run.yaml
kubectl replace -f nginx-run.yaml
kubectl get all
kubectl create deployment --image=nginx nginx
kubectl create deployment --image=nginx nginx --dry-run=client -o yaml > nginx-deployment.yaml
kubectl create deployment --image=nginx nginx --replicas=4 --dry-run=client -o yaml > nginx-deployment.yaml
kubectl get deployments.apps nginx-deployment -o yaml > nginx-dep.yaml

#replicasets
kubectl create -f replica_set.yaml
kubectl get replicationcontroller
kubectl get replicaset
kubectl delete replicaset myapp-replicaset
kubectl replace -f replica_set.yaml 
-0 986 4u/
kubectl scale --replicas=6 -f replica_set.yaml #number of replicas in the yaml file will not be changed
kubectl scale --replicas=6 replicaset myapp-replicaset
kubectl edit deployment my-deployment
 
#namespace
kubectl get namespace -A
kubectl create namespace dev
kubectl get pods --namespaces=default
kubectl get pods --all-namespaces
kubectl run redis --image=redis --namespace=finance
kubectl config set-context $(kubectl config current-context) --namespace=dev

#services
kubectl get services
kubectl apply -f /path/to/config/files
ubectl expose pod redis --port=6379 --name redis-service --dry-run=client -o yaml > service.yaml

#labels
kubectl get pod -l env=prod,bu=finance,tier=frontend
kubectl get all -l env=prod  --no-headers | wc
kubectl label nodes <node-name> <label-key>=<label-value>
kubectl get nodes node01 --show-label

#taints and toleration, node selector, node affinity
kubectl taint nodes node1 app=blue:NoSchedule
kubectl taint nodes node01 spray=mortein:NoExecute
kubectl taint nodes controlplane node-role.kubernetes.io/master:NoSchedule-   #to untaint node
kubectl label noded node01 size=Large

#kublet service location
cd /var/lib/kubelet

#metrics server
kubectl top node
kubectl top pod
kubectl logs -f <pod-name> <container-name> #stream logs to stdout

#lifecycle management
kubectl rollout status deployment 
kubectl rollout history deployment 
kubectl rollout undo deployment 
kubectl get configmaps

#cluster maintanance
kubectl drain node-1 # drain pods to other nodes and render unschedulable
kubectl cordon node-01 #render unschedulable but dones not drain already kubectl drain node01 --ignore-daemonsetsexisting pods
kubectl uncordon node-1
kubectl drain node01 --ignore-daemonsets

apt-mark unhold kubelet kubectl && \
    apt-get update && apt-get install -y kubelet=1.20.0-00 kubectl=1.20.0-00 && \
    apt-mark hold kubelet kubectl

    kubectl auth can-i create pods --as devuser --namespace test